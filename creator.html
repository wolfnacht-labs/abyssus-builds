<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Build Creator - Abyssus Builds</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #0f0f0f;
            color: white;
        }

        /* Navbar */
        .navbar {
            background-color: #000;
            border-bottom: 3px solid #059669;
            padding: 0;
            display: flex;
            align-items: center;
            height: 80px;
        }

        .logo {
            padding: 0 30px;
            font-size: 24px;
            font-weight: bold;
            color: #059669;
        }

        .nav-links {
            display: flex;
            gap: 0;
            height: 100%;
            margin-left: 20px;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 0 40px;
            display: flex;
            align-items: center;
            font-size: 18px;
            height: 100%;
            transition: background-color 0.3s;
        }

        .nav-links a:hover, .nav-links a.active {
            background-color: #1a1a1a;
        }

        /* Creator Content */
        .creator-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #059669;
        }

        .form-section {
            background-color: #1A1A1A;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .input-group {
            display: flex;
            gap: 10px;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        input[type="text"], select, textarea {
            background-color: #2C3539;
            color: white;
            border: 1px solid #444;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
        }

        input[type="text"]:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #059669;
        }

        .build-content {
            display: flex;
            gap: 15px;
        }

        .weapon-column {
            flex: 2;
        }

        .ability-column {
            flex: 1;
        }

        .section-header {
            background-color: #2C3539;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            margin-bottom: 10px;
            border-radius: 4px;
        }

        .form-row {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .form-col {
            flex: 1;
        }

        .form-col label {
            display: block;
            background-color: #2C3539;
            padding: 8px;
            text-align: center;
            font-weight: bold;
            border-radius: 4px;
            margin-bottom: 5px;
        }

        .form-col select {
            width: 100%;
        }

        .forge-section {
            margin-top: 20px;
        }

        .forge-item {
            margin-bottom: 8px;
        }

        .charms-row {
            display: flex;
            gap: 10px;
        }

        textarea {
            width: 100%;
            height: 80px;
            resize: vertical;
        }

        .submit-btn {
            background-color: #059669;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 6px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
        }

        .submit-btn:hover {
            background-color: #047857;
        }

        .success-message {
            background-color: #059669;
            color: white;
            padding: 15px;
            border-radius: 4px;
            text-align: center;
            margin: 20px 0;
            display: none;
        }

        .select-with-icon {
            position: relative;
            display: block;
        }

        .selected-icon {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            object-fit: contain;
            pointer-events: none;
            display: none;
            z-index: 1;
        }

        .select-with-icon select {
            padding-left: 38px;
        }
    </style>
    <script type="module">
        // Firebase imports
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCBpZluc0v2dxu1GhgQv8SucSKwmM2ESdU",
            authDomain: "abyssus-builds.firebaseapp.com",
            projectId: "abyssus-builds",
            storageBucket: "abyssus-builds.firebasestorage.app",
            messagingSenderId: "139945292825",
            appId: "1:139945292825:web:f730c55dded04e689fa688"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Make functions available globally
        window.db = db;
        window.firestore = { collection, addDoc };
    </script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="logo">
            <img src="abyssus_builds.png" alt="Abyssus Builds" style="height: 50px;">
        </div>
        <div class="nav-links">
            <a href="index.html">Builds</a>
            <a href="creator.html" class="active">Build Creator</a>
        </div>
    </nav>

    <div class="creator-container">
        <h1>Create Your Build</h1>
        
        <div id="successMessage" class="success-message">
            Build created successfully! <a href="index.html" style="color: white; text-decoration: underline;">View all builds</a>
        </div>

        <div class="form-section">
            <div class="input-group">
                <input type="text" id="buildName" placeholder="Build Name" style="width: 400px;">
                <span style="color: white; font-size: 16px; margin: 0 5px;">@</span>
                <input type="text" id="authorName" placeholder="Author Name" style="width: 300px;">
            </div>
        </div>

        <div class="form-section">
            <div class="build-content">
                <!-- Weapon Column -->
                <div class="weapon-column">
                    <div class="section-header">Weapon</div>
                    <div class="select-with-icon" style="margin-bottom: 15px;">
                        <img id="weaponIcon" class="selected-icon" src="" alt="">
                        <select id="weaponSelect" style="width: 100%;" onchange="updateWeaponIcon()">
                            <option value="">Select Weapon</option>
                            <option value="Engine Rifle">Engine Rifle</option>
                            <option value="Shotgun">Shotgun</option>
                            <option value="Tesla Gun">Tesla Gun</option>
                            <option value="Brine Revolver">Brine Revolver</option>
                            <option value="Disc Thrower">Disc Thrower</option>
                            <option value="Combat Bow">Combat Bow</option>
                            <option value="Plasma Launcher">Plasma Launcher</option>
                            <option value="Fish Deity">Fish Deity</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-col">
                            <label>Primary</label>
                            <div class="select-with-icon">
                                <img id="primaryIcon" class="selected-icon" src="" alt="">
                                <select id="primarySelect" style="width: 100%;" onchange="updatePrimaryIcon()">
                                    <option value="">Select Primary</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-col">
                            <label>Secondary</label>
                            <div class="select-with-icon">
                                <img id="secondaryIcon" class="selected-icon" src="" alt="">
                                <select id="secondarySelect" style="width: 100%;" onchange="updateSecondaryIcon()">
                                    <option value="">Select Secondary</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-row" style="margin-top: 2px;">
                        <div class="form-col">
                            <label>Aspect</label>
                            <div class="select-with-icon">
                                <img id="aspect1Icon" class="selected-icon" src="" alt="">
                                <select id="aspect1" style="width: 100%;" onchange="updateAspectOptions(); updateAspectIcons()">
                                    <option value="">Select Aspect</option>
                                    <option value="Blood">Blood</option>
                                    <option value="Barrier">Barrier</option>
                                    <option value="Flares">Flares</option>
                                    <option value="Goldburst">Goldburst</option>
                                    <option value="Frozen">Frozen</option>
                                    <option value="Chain Lightning">Chain Lightning</option>
                                    <option value="Shadows">Shadows</option>
                                    <option value="Tentacles">Tentacles</option>
                                    <option value="Spirit">Spirit</option>
                                    <option value="Windburst">Windburst</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-col">
                            <label>Aspect</label>
                            <div class="select-with-icon">
                                <img id="aspect2Icon" class="selected-icon" src="" alt="">
                                <select id="aspect2" style="width: 100%;" onchange="updateAspectOptions(); updateAspectIcons()">
                                    <option value="">Select Aspect</option>
                                    <option value="Blood">Blood</option>
                                    <option value="Barrier">Barrier</option>
                                    <option value="Flares">Flares</option>
                                    <option value="Goldburst">Goldburst</option>
                                    <option value="Frozen">Frozen</option>
                                    <option value="Chain Lightning">Chain Lightning</option>
                                    <option value="Shadows">Shadows</option>
                                    <option value="Tentacles">Tentacles</option>
                                    <option value="Spirit">Spirit</option>
                                    <option value="Windburst">Windburst</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="forge-section">
                        <div class="section-header">Forge Upgrades</div>
                        <div class="forge-item">
                            <div class="select-with-icon">
                                <img id="weaponForge1Icon" class="selected-icon" src="" alt="">
                                <select id="weaponForge1" style="width: 100%;" onchange="updateWeaponForgeIcons(); updateForgeAvailability()">
                                    <option value="">Forge Upgrade #1</option>
                                </select>
                            </div>
                        </div>
                        <div class="forge-item">
                            <div class="select-with-icon">
                                <img id="weaponForge2Icon" class="selected-icon" src="" alt="">
                                <select id="weaponForge2" style="width: 100%;" onchange="updateWeaponForgeIcons(); updateForgeAvailability()">
                                    <option value="">Forge Upgrade #2</option>
                                </select>
                            </div>
                        </div>
                        <div class="forge-item">
                            <div class="select-with-icon">
                                <img id="weaponForge3Icon" class="selected-icon" src="" alt="">
                                <select id="weaponForge3" style="width: 100%;" onchange="updateWeaponForgeIcons(); updateForgeAvailability()">
                                    <option value="">Forge Upgrade #3</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ability Column -->
                <div class="ability-column">
                    <div class="section-header">Ability</div>
                    <div class="select-with-icon" style="margin-bottom: 15px;">
                        <img id="abilityIcon" class="selected-icon" src="" alt="">
                        <select id="abilitySelect" style="width: 100%;" onchange="updateAbilityIcon()">
                            <option value="">Select Ability</option>
                            <option value="Frag Grenade">Frag Grenade</option>
                            <option value="Anchor">Anchor</option>
                            <option value="Ancient Core">Ancient Core</option>
                            <option value="Brine Field">Brine Field</option>
                            <option value="Turret">Turret</option>
                        </select>
                    </div>

                    <div style="height: 75px; margin-bottom: 0px;"></div>

                    <div style="margin-bottom: 15px; margin-top: 2px;">
                        <label style="display: block; background-color: #2C3539; padding: 8px; text-align: center; font-weight: bold; border-radius: 4px; margin-bottom: 5px;">Aspect</label>
                        <div class="select-with-icon">
                            <img id="aspect3Icon" class="selected-icon" src="" alt="">
                            <select id="aspect3" style="width: 100%;" onchange="updateAspectOptions(); updateAspectIcons()">
                                <option value="">Select Aspect</option>
                                <option value="Blood">Blood</option>
                                <option value="Barrier">Barrier</option>
                                <option value="Flares">Flares</option>
                                <option value="Goldburst">Goldburst</option>
                                <option value="Frozen">Frozen</option>
                                <option value="Chain Lightning">Chain Lightning</option>
                                <option value="Shadows">Shadows</option>
                                <option value="Tentacles">Tentacles</option>
                                <option value="Spirit">Spirit</option>
                                <option value="Windburst">Windburst</option>
                            </select>
                        </div>
                    </div>

                    <div class="forge-section">
                        <div class="section-header">Forge Upgrades</div>
                        <div class="forge-item">
                            <div class="select-with-icon">
                                <img id="abilityForge1Icon" class="selected-icon" src="" alt="">
                                <select id="abilityForge1" style="width: 100%;" onchange="updateAbilityForgeIcons(); updateForgeAvailability()">
                                    <option value="">Forge Upgrade #1</option>
                                </select>
                            </div>
                        </div>
                        <div class="forge-item">
                            <div class="select-with-icon">
                                <img id="abilityForge2Icon" class="selected-icon" src="" alt="">
                                <select id="abilityForge2" style="width: 100%;" onchange="updateAbilityForgeIcons(); updateForgeAvailability()">
                                    <option value="">Forge Upgrade #2</option>
                                </select>
                            </div>
                        </div>
                        <div class="forge-item">
                            <div class="select-with-icon">
                                <img id="abilityForge3Icon" class="selected-icon" src="" alt="">
                                <select id="abilityForge3" style="width: 100%;" onchange="updateAbilityForgeIcons(); updateForgeAvailability()">
                                    <option value="">Forge Upgrade #3</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-section">
            <div class="section-header">Charms</div>
            <div class="charms-row">
                <div class="select-with-icon" style="flex: 1; margin-right: 10px;">
                    <img id="charm1Icon" class="selected-icon" src="" alt="">
                    <select id="charm1" style="width: 100%;" onchange="updateCharmOptions(); updateCharmIcons()">
                        <option value="">Select Charm</option>
                        <option value="Hawkeye">Hawkeye</option>
                        <option value="Gun Meets Face">Gun Meets Face</option>
                        <option value="Activate Gun Mode">Activate Gun Mode</option>
                        <option value="Hate Forged">Hate Forged</option>
                        <option value="Supersonic">Supersonic</option>
                        <option value="Power From Pain">Power From Pain</option>
                        <option value="Golden Ticket">Golden Ticket</option>
                        <option value="Fan">Fan</option>
                        <option value="Ms. Boom">Ms. Boom</option>
                        <option value="Mr. Boom">Mr. Boom</option>
                        <option value="Gold Lure">Gold Lure</option>
                        <option value="Freebie">Freebie</option>
                        <option value="Bandage">Bandage</option>
                        <option value="Phoenix Feather">Phoenix Feather</option>
                        <option value="Perfectionist">Perfectionist</option>
                        <option value="Durable">Durable</option>
                        <option value="Consistent Killer">Consistent Killer</option>
                        <option value="Piercing Rounds">Piercing Rounds</option>
                        <option value="Assassination">Assassination</option>
                        <option value="Violent Commitment">Violent Commitment</option>
                        <option value="Healthy Commitment">Healthy Commitment</option>
                        <option value="Slow Power">Slow Power</option>
                        <option value="Upgrade Kit">Upgrade Kit</option>
                        <option value="Gold Converter">Gold Converter</option>
                        <option value="Marksman">Marksman</option>
                        <option value="Skeleton Key">Skeleton Key</option>
                        <option value="Overkill">Overkill</option>
                        <option value="Giant Slayer">Giant Slayer</option>
                        <option value="Headstart">Headstart</option>
                        <option value="Favored Foe">Favored Foe</option>
                        <option value="Lifeline">Lifeline</option>
                        <option value="Overdrive">Overdrive</option>
                        <option value="Lucky Charm">Lucky Charm</option>
                        <option value="Revenant">Revenant</option>
                        <option value="Hex">Hex</option>
                        <option value="Backline">Backline</option>
                        <option value="Thief's Eye">Thief's Eye</option>
                        <option value="Blessed">Blessed</option>
                        <option value="Spiritual">Spiritual</option>
                        <option value="Productive">Productive</option>
                    </select>
                </div>
                <div class="select-with-icon" style="flex: 1;">
                    <img id="charm2Icon" class="selected-icon" src="" alt="">
                    <select id="charm2" style="width: 100%;" onchange="updateCharmOptions(); updateCharmIcons()">
                        <option value="">Select Charm</option>
                        <option value="Hawkeye">Hawkeye</option>
                        <option value="Gun Meets Face">Gun Meets Face</option>
                        <option value="Activate Gun Mode">Activate Gun Mode</option>
                        <option value="Hate Forged">Hate Forged</option>
                        <option value="Supersonic">Supersonic</option>
                        <option value="Power From Pain">Power From Pain</option>
                        <option value="Golden Ticket">Golden Ticket</option>
                        <option value="Fan">Fan</option>
                        <option value="Ms. Boom">Ms. Boom</option>
                        <option value="Mr. Boom">Mr. Boom</option>
                        <option value="Gold Lure">Gold Lure</option>
                        <option value="Freebie">Freebie</option>
                        <option value="Bandage">Bandage</option>
                        <option value="Phoenix Feather">Phoenix Feather</option>
                        <option value="Perfectionist">Perfectionist</option>
                        <option value="Durable">Durable</option>
                        <option value="Consistent Killer">Consistent Killer</option>
                        <option value="Piercing Rounds">Piercing Rounds</option>
                        <option value="Assassination">Assassination</option>
                        <option value="Violent Commitment">Violent Commitment</option>
                        <option value="Healthy Commitment">Healthy Commitment</option>
                        <option value="Slow Power">Slow Power</option>
                        <option value="Upgrade Kit">Upgrade Kit</option>
                        <option value="Gold Converter">Gold Converter</option>
                        <option value="Marksman">Marksman</option>
                        <option value="Skeleton Key">Skeleton Key</option>
                        <option value="Overkill">Overkill</option>
                        <option value="Giant Slayer">Giant Slayer</option>
                        <option value="Headstart">Headstart</option>
                        <option value="Favored Foe">Favored Foe</option>
                        <option value="Lifeline">Lifeline</option>
                        <option value="Overdrive">Overdrive</option>
                        <option value="Lucky Charm">Lucky Charm</option>
                        <option value="Revenant">Revenant</option>
                        <option value="Hex">Hex</option>
                        <option value="Backline">Backline</option>
                        <option value="Thief's Eye">Thief's Eye</option>
                        <option value="Blessed">Blessed</option>
                        <option value="Spiritual">Spiritual</option>
                        <option value="Productive">Productive</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="form-section">
            <div class="section-header">Description</div>
            <textarea id="description" placeholder="Here should be a short description."></textarea>
        </div>

        <button class="submit-btn" onclick="addBuild()">Add Build</button>
    </div>

    <script>
        const weaponIcons = {
            'Engine Rifle': 'images/weapons/Engine_Rifle_Icon.png',
            'Shotgun': 'images/weapons/Shotgun_Icon.png',
            'Tesla Gun': 'images/weapons/Tesla_Gun_Icon.png',
            'Brine Revolver': 'images/weapons/Brine_Revolver_Icon.png',
            'Disc Thrower': 'images/weapons/Disc_Thrower_Icon.png',
            'Combat Bow': 'images/weapons/Combat_Bow_Icon.png',
            'Plasma Launcher': 'images/weapons/Plasma_Launcher_Icon.png',
            'Fish Deity': 'images/weapons/Fish_Deity_Icon.png'
        };

        const abilityIcons = {
            'Frag Grenade': 'images/abilities/Frag_Grenade_Icon.png',
            'Anchor': 'images/abilities/Anchor_Icon.png',
            'Ancient Core': 'images/abilities/Ancient_Core_Icon.png',
            'Brine Field': 'images/abilities/Brine_Field_Icon.png',
            'Turret': 'images/abilities/Turret_Icon.png'
        };

        const aspectIcons = {
            'Blood': 'images/aspects/Blood_Icon.png',
            'Barrier': 'images/aspects/Barrier_Icon.png',
            'Flares': 'images/aspects/Flares_Icon.png',
            'Goldburst': 'images/aspects/Goldburst_Icon.png',
            'Frozen': 'images/aspects/Frozen_Icon.png',
            'Chain Lightning': 'images/aspects/Chain_Lightning_Icon.png',
            'Shadows': 'images/aspects/Shadows_Icon.png',
            'Tentacles': 'images/aspects/Tentacles_Icon.png',
            'Spirit': 'images/aspects/Spirit_Icon.png',
            'Windburst': 'images/aspects/Windburst_Icon.png'
        };

        const charmIcons = {
            'Hawkeye': 'images/charms/Charm_Common_Icon.png',
            'Gun Meets Face': 'images/charms/Charm_Common_Icon.png',
            'Activate Gun Mode': 'images/charms/Charm_Common_Icon.png',
            'Hate Forged': 'images/charms/Charm_Common_Icon.png',
            'Supersonic': 'images/charms/Charm_Common_Icon.png',
            'Power From Pain': 'images/charms/Charm_Rare_Icon.png',
            'Golden Ticket': 'images/charms/Charm_Legendary_Icon.png',
            'Fan': 'images/charms/Charm_Legendary_Icon.png',
            'Ms. Boom': 'images/charms/Charm_Rare_Icon.png',
            'Mr. Boom': 'images/charms/Charm_Legendary_Icon.png',
            'Gold Lure': 'images/charms/Charm_Legendary_Icon.png',
            'Freebie': 'images/charms/Charm_Legendary_Icon.png',
            'Bandage': 'images/charms/Charm_Rare_Icon.png',
            'Phoenix Feather': 'images/charms/Charm_Legendary_Icon.png',
            'Perfectionist': 'images/charms/Charm_Common_Icon.png',
            'Durable': 'images/charms/Charm_Common_Icon.png',
            'Consistent Killer': 'images/charms/Charm_Common_Icon.png',
            'Piercing Rounds': 'images/charms/Charm_Common_Icon.png',
            'Assassination': 'images/charms/Charm_Common_Icon.png',
            'Violent Commitment': 'images/charms/Charm_Rare_Icon.png',
            'Healthy Commitment': 'images/charms/Charm_Common_Icon.png',
            'Slow Power': 'images/charms/Charm_Rare_Icon.png',
            'Upgrade Kit': 'images/charms/Charm_Legendary_Icon.png',
            'Gold Converter': 'images/charms/Charm_Rare_Icon.png',
            'Marksman': 'images/charms/Charm_Common_Icon.png',
            'Skeleton Key': 'images/charms/Charm_Legendary_Icon.png',
            'Overkill': 'images/charms/Charm_Legendary_Icon.png',
            'Giant Slayer': 'images/charms/Charm_Common_Icon.png',
            'Headstart': 'images/charms/Charm_Common_Icon.png',
            'Favored Foe': 'images/charms/Charm_Rare_Icon.png',
            'Lifeline': 'images/charms/Charm_Common_Icon.png',
            'Overdrive': 'images/charms/Charm_Common_Icon.png',
            'Lucky Charm': 'images/charms/Charm_Rare_Icon.png',
            'Revenant': 'images/charms/Charm_Rare_Icon.png',
            'Hex': 'images/charms/Charm_Rare_Icon.png',
            'Backline': 'images/charms/Charm_Common_Icon.png',
            "Thief's Eye": 'images/charms/Charm_Legendary_Icon.png',
            'Blessed': 'images/charms/Charm_Rare_Icon.png',
            'Spiritual': 'images/charms/Charm_Legendary_Icon.png',
            'Productive': 'images/charms/Charm_Common_Icon.png'
        };

        const primaryIcons = {
            'Automatic Fire': 'images/primaries/Automatic_Fire.png',
            'Burst Fire': 'images/primaries/Burst_Fire.png',
            'Gatling Fire': 'images/primaries/Gatling_Fire.png',
            'Semi-automatic': 'images/primaries/Semi-automatic.png',
            'Full-automatic': 'images/primaries/Full-automatic.png',
            'Superheavy Slug': 'images/primaries/Superheavy_Slug.png',
            'Electrical Beam': 'images/primaries/Electrical_Beam.png',
            'Charge Beam': 'images/primaries/Charge_Beam.png',
            'Unstable Coil': 'images/primaries/Unstable_Coil.png',
            'Large Caliber': 'images/primaries/Large_Caliber.png',
            'Automatic': 'images/primaries/Automatic.png',
            'Fan Fire': 'images/primaries/Fan_Fire.png',
            'Dynamo': 'images
